<?xml version="1.0" encoding="utf-8"?>
<!--
  Configuración del sistema Congreso_2025
  Autenticación por Forms: redirige al Login cuando no hay sesión
-->
<configuration>

	<!-- ======= CONEXIONES ======= -->
	<connectionStrings>
		<add name="CongresoConnectionString"
			 connectionString="Data Source=congresoudeo2025.c9ykky2iegp1.us-east-2.rds.amazonaws.com;Initial Catalog=Congreso;User ID=Admin;Password=udeocongreso0.;Encrypt=False"
			 providerName="System.Data.SqlClient" />

		<!-- Puedes dejar solo la primera, las demás son duplicadas -->
		<add name="db_abf0a2_proyectoConnectionString"
			 connectionString="Data Source=sql1002.site4now.net;Initial Catalog=db_abf0a2_proyecto;User ID=db_abf0a2_proyecto_admin;Password=admin123;Encrypt=False"
			 providerName="System.Data.SqlClient" />
	</connectionStrings>

	<!-- ======= CONFIGURACIÓN ASP.NET ======= -->
	<system.web>

		<compilation debug="true" targetFramework="4.7.2" />
		<httpRuntime targetFramework="4.7.2" />

		<!-- 🔐 Autenticación por formularios -->
		<authentication mode="Forms">
			<forms loginUrl="~/Login.aspx" name=".ASPXAUTH" timeout="60" />
		</authentication>

		<!-- 🚫 Denegar acceso a anónimos -->
		<authorization>
			<deny users="?" />
			<allow users="*" />
		</authorization>

	</system.web>

	<!-- ✅ Excepción: permitir acceso al Login.aspx -->
	<location path="Login.aspx">
		<system.web>
			<authorization>
				<allow users="?" />
			</authorization>
		</system.web>
	</location>

	<!-- (opcional) Permitir libre acceso a recursos estáticos -->
	<location path="assets">
		<system.web>
			<authorization>
				<allow users="*" />
			</authorization>
		</system.web>
	</location>

	<system.webServer>
		<defaultDocument enabled="true">
			<files>
				<clear />
				<add value="Login.aspx" />
			</files>
		</defaultDocument>
	</system.webServer>


	<!-- ======= COMPILADORES ======= -->
	<system.codedom>
		<compilers>
			<compiler language="c#;cs;csharp" extension=".cs"
			  type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
			  warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701" />
			<compiler language="vb;vbs;visualbasic;vbscript" extension=".vb"
			  type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
			  warningLevel="4"
			  compilerOptions="/langversion:default /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
		</compilers>
	</system.codedom>

</configuration>
